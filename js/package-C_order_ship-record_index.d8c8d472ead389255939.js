(window.webpackJsonp=window.webpackJsonp||[]).push([[187],{"2218":function(e,t,n){},"2220":function(e,t,n){},"251":function(e,t,n){"use strict";function extraPathsValue(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t.length>=2?t[1]:null,o=null;"function"==typeof t[t.length-1]&&(o=t[t.length-1]);var i=[],c=void 0,s=[];return"string"==typeof r&&a&&a.props&&a.props["data-paths"]?(i=a.props["data-paths"].split(/[,\.]/gi),c=r):r instanceof Array&&r[0].hasOwnProperty("paths")&&r[0].hasOwnProperty("value")?s=r.map(function(e){var t=e.paths,n=e.value,r=t;return"string"==typeof r&&(r=t.split(/[,\.]/gi)),{"paths":r,"value":n}}):"string"==typeof r?(i=r.split(/[,\.]/gi),c=a,console.log(i,c,103)):r.hasOwnProperty("target")&&r.target["data-paths"]&&void 0!=r.target.value?(i=r.target["data-paths"].split(/[,\.]/gi),c=r.target.value):r.hasOwnProperty("target")&&r.target.dataset&&r.target.dataset.paths?(i=r.target.dataset.paths.split(/[,\.]/gi),c=r.target.value):r instanceof Array&&a instanceof Array&&a[0]&&"function"==typeof a[0].type&&a[0].props&&a[0].props["data-paths"]?(i=a[0].props["data-paths"].split(/[,\.]/gi),c=r):r instanceof Array?(i=r,c=a):a&&a.hasOwnProperty("props")&&a.props.hasOwnProperty("data-paths")&&a.props.hasOwnProperty("value")&&(i=a.props["data-paths"].split(/[,\.]/gi),c=a.props.value),o?o({"paths":i,"value":c,"batchUpdate":s,"raw":t}):{"paths":i,"value":c,"batchUpdate":s}}n.d(t,"a",function(){return extraPathsValue})},"252":function(e,t,n){"use strict";n.d(t,"a",function(){return getActionProxy});function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var o=t[r](a),i=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}var r,a=[(r=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e,t){var n,r=e.methodName,a=e.target;return regeneratorRuntime.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if("query"!==r||!a.commonChange){e.next=11;break}return console.log("beginMiddware"),a.commonChange(["main","isLoading"],!0),e.next=5,t();case 5:return n=e.sent,a.commonChange(["main","isLoading"],!1),console.log("end Middware"),e.abrupt("return",n);case 11:return e.abrupt("return",t());case 12:case"end":return e.stop()}},_callee,void 0)})),function loadingM(e,t){return r.apply(this,arguments)})],o=function compose(e){var t,n,r=(t=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(t,n,o){var i,c;return regeneratorRuntime.wrap(function _callee4$(s){for(;;)switch(s.prev=s.next){case 0:return i=t+1,c=r.bind(null,i,n,o),i===a&&(c=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e;return regeneratorRuntime.wrap(function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},_callee3,this)}));return function _next(){return e.apply(this,arguments)}}()),s.abrupt("return",e[t](n,c));case 4:case"end":return s.stop()}},_callee4,this)})),function _dispatch(e,n,r){return t.apply(this,arguments)}),a=e.length;return n=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e,t){return regeneratorRuntime.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(0,e,t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},_callee2,void 0)})),function(e,t){return n.apply(this,arguments)}};function getActionProxy(e){var t={},n=o(a);return function(r){var a=e(r),o=new Proxy(a,{"get":function get(e,r,i){var c=this,s=String(r);return t[s]||"function"!=typeof a[r]||(t[s]=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var l,u;return regeneratorRuntime.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return l=t,e.next=3,n({"methodName":s,"arguments":l,"target":o},function(){return a[r].apply(o,l)});case 3:return u=e.sent,e.abrupt("return",u);case 5:case"end":return e.stop()}},_callee5,c)}))),t[s]?t[s]:Reflect.get(e,r,i)},"set":function set(e,t,n,r){return Reflect.set(e,t,n,r)},"apply":function apply(e,t,n){return Reflect.apply.apply(Reflect,arguments)}});return o}}},"253":function(e,t,n){"use strict";function commonChange(e,t){if(t.paths&&(t.paths=function ensurePath(e){var t=e;return"string"==typeof e?t=e.split("."):t}(t.paths)),t.paths[0]===t.key&&modifyDeep(e,t.paths.splice(1),t.value),t.batchUpdate)for(var n=0,r=t.batchUpdate.length;n<r;n++){var a=t.batchUpdate[n],o=a.paths,i=a.value;o[0]===t.key&&modifyDeep(e,o.splice(1),i)}return e}function modifyDeep(e,t,n){for(var r=e,a=t.length-1,o=0,i=a;o<i;o++)(r=r[t[o]])||console.warn("the obj defined by paths "+t+" is not exist!!");"function"==typeof n?n(r[t[a]]):r[t[a]]=n}function assign(e,t){if(!t)return e;for(var n in t)e[n]=t[n];return e}n.d(t,"b",function(){return commonChange}),n.d(t,"a",function(){return assign})},"2789":function(e,t,n){"use strict";n.r(t);var r,a=n(5),o=n(246),i=n(2631),c=n(271),s=n(3),l=n(37);n(2218);!function(e){e.commonChange="packageCOrderShipRecordMain_commonChange",e.init="packageCOrderShipRecordMain_INIT",e.clean="packageCOrderShipRecordMain_CLEAN"}(r||(r={}));var u=n(252),p=n(38),f=n(9),m=n(251),d=n(14);var h=function(e){return{"commonChange":function commonChange(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];e({"type":r.commonChange,"payload":m.a.apply(void 0,arguments)})},"onConfirm":function(){var t=function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var o=t[r](a),i=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}(regeneratorRuntime.mark(function _callee(t){return regeneratorRuntime.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,f.a.tradeBaseController.confirmOrder(t);case 3:Object(d.e)({"title":"收货成功！","icon":"none","duration":2e3}),s.a.navigateTo({"url":"/pages/package-C/order/order-list/index"}),e({"type":r.commonChange,"payload":{"paths":"main.deliveryStatus","value":!1}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),Object(d.e)({"title":"该订单状态已变更，请刷新后重试","icon":"none","duration":2e3});case 11:case"end":return n.stop()}},_callee,this,[[0,8]])}));return function onConfirm(e){return t.apply(this,arguments)}}()}};var y=n(257),g=n(253),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b={"isReady":!1,"tradeDilivery":[],"type":"0","deliveryStatus":!0,"orderId":"","orderMType":"","key":"","showConfirmMask":!1};function main_main(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments[1],n=t.type,a=t.payload;return Object(y.a)(e,function(e){switch(n){case r.commonChange:return g.b(e,v({},a,{"key":"main"}));case r.init:for(var t in e.isReady=!0,a.main)e[t]=a.main[t];return e;case r.clean:for(var o in b)e[o]=b[o];return e}})}function actions_asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var o=t[r](a),i=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}var _=function(e){var t={"action":Object(u.a)(h)(e),"init":function(){var n=actions_asyncToGenerator(regeneratorRuntime.mark(function _callee(n,a){var o,i;return regeneratorRuntime.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.loadReducer();case 2:if(o=void 0,c.prev=3,"1"!=a){c.next=10;break}return c.next=7,f.a.pointsTradeBaseController.tradeDeliverRecord(n,a);case 7:o=c.sent,c.next=13;break;case 10:return c.next=12,f.a.tradeBaseController.tradeDeliverRecord(n,a);case 12:o=c.sent;case 13:i=!1,"DELIVERED"==o.status&&(i=!0),e({"type":r.init,"payload":{"main":{"tradeDilivery":o.tradeDeliver,"type":a,"deliveryStatus":i,"orderId":n}}}),c.next=20;break;case 18:c.prev=18,c.t0=c.catch(3);case 20:case"end":return c.stop()}},_callee,this,[[3,18]])}));return function init(e,t){return n.apply(this,arguments)}}(),"clean":function(){var n=actions_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=!1,!n.t0){n.next=4;break}return n.next=4,t.unloadReducer();case 4:e({"type":r.clean});case 5:case"end":return n.stop()}},_callee2,this)}));return function clean(){return n.apply(this,arguments)}}(),"loadReducer":function(){var e=actions_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:p.d({"packageCOrderShipRecordMain":main_main});case 1:case"end":return e.stop()}},_callee3,this)}));return function loadReducer(){return e.apply(this,arguments)}}(),"unloadReducer":function(){var e=actions_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function _callee4$(e){for(;;)switch(e.prev=e.next){case 0:p.b?p.b(["packageCOrderShipRecordMain"]):console.error("请在redux/store中实现deregister逻辑. ");case 1:case"end":return e.stop()}},_callee4,this)}));return function unloadReducer(){return e.apply(this,arguments)}}()};return{"actions":t}};function store2Props(e){return{"main":e.packageCOrderShipRecordMain}}var w=n(279),k=n(278),O=(n(2220),n(24)),x=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var R=["已签收","待收货","已拒收"],C=function(e){function OrderList(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OrderList);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(OrderList.__proto__||Object.getPrototypeOf(OrderList)).call(this,e));return t._toShipList=function(e){var n=t.props.main.orderId;s.a.navigateTo({"url":"/pages/package-C/order/ship-list/index?oid="+n+"&tid="+e})},t._toLogisticInfo=function(e,n,r,a){var o=t.props.main,i=o.orderId,c=o.type;s.a.navigateTo({"url":"/pages/package-C/order/logistics-info/index?oid="+i+"&tid="+e+"&type="+c+"&thirdPlatformType="+n+"&buyerId="+r+"&thirdPlatformOrderId="+a})},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(OrderList,s["a"].Component),x(OrderList,[{"key":"render","value":function render(){var e=this,t=this.props.order,n=t&&t.packageState,r=0,o=Object(O.fromJS)(t.shippingItems).concat(Object(O.fromJS)(t.giftItemList)).map(function(e){return r+=e.get("itemNum"),e.get("skuId")}).toSet();return a.l.createElement(i.a,null,a.l.createElement(i.a,{"className":"user-box","key":t.id},a.l.createElement(i.a,{"className":"user-order-item"},a.l.createElement(i.a,{"className":"user-order-item-top"},a.l.createElement(i.a,{"style":{"flexDirection":"row","justifyContent":"space-between"}},a.l.createElement(w.a,{"className":"name"},t.logistics.logisticCompanyName),a.l.createElement(w.a,{"className":"grey"},t.logistics.logisticNo)),t.status&&"SHIPPED"==t.status?a.l.createElement(i.a,{"style":{"flexDirection":"row","marginTop":"10px"}},a.l.createElement(w.a,{"className":"name1"},"发货时间："),a.l.createElement(w.a,{"className":"name1"},t.deliverTime&&t.deliverTime.split(" ")[0])):null,n&&a.l.createElement(i.a,{"style":{"flexDirection":"row","marginTop":"10px"}},a.l.createElement(w.a,{"className":"name1"},"物流状态："),a.l.createElement(w.a,{"className":"name1"},R[n-1]))),a.l.createElement(i.a,{"onClick":function onClick(){return e._toShipList(t.deliverId)},"className":"img_box"},a.l.createElement(i.a,{"className":"img-content"},t.shippingItems.concat(t.giftItemList).map(function(e,t){return t<3?a.l.createElement(k.a,{"className":"img-item","src":e.pic?e.pic:"@/assets/image/coupon/empty.png"}):null})),a.l.createElement(i.a,{"className":"right-context"},a.l.createElement(i.a,{"className":"total-num"},a.l.createElement(w.a,{"className":"num"},o.size),"种",a.l.createElement(w.a,{"style":{"marginLeft":"3px"}},""),"共",a.l.createElement(w.a,{"className":"num"},r),"件"),a.l.createElement(k.a,{"src":"https://eshop-lcpro.oss-cn-shanghai.aliyuncs.com/mini/assets/image/common/arrow.png","style":{"width":"12px","height":"12px"}}))),a.l.createElement(i.a,{"className":"bottom"},a.l.createElement(i.a,{"className":"btn","onClick":function onClick(){return e._toLogisticInfo(t.deliverId,t.thirdPlatformType,t.logistics.buyerId,t.logistics.thirdPlatformOrderId)}},"物流信息")))))}}]),OrderList}(),P=C=Object(o.a)([Object(l.b)(store2Props,_)],C),E=n(716),j=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),T=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0};_().actions.loadReducer();var N=function(e){function shipRecord(){!function ship_record_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,shipRecord);var e=function ship_record_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(shipRecord.__proto__||Object.getPrototypeOf(shipRecord)).apply(this,arguments));return e.config={"navigationBarTitleText":"发货记录"},e}return function ship_record_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(shipRecord,s["a"].Component),j(shipRecord,[{"key":"componentDidMount","value":function componentDidMount(){var e=this.$router.params,t=e.tid,n=e.type;this.props.actions.init(t,n)}},{"key":"componentWillMount","value":function componentWillMount(){0}},{"key":"onShareAppMessage","value":function onShareAppMessage(){return{}}},{"key":"onShareTimeline","value":function onShareTimeline(){}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.props.actions.clean()}},{"key":"render","value":function render(){var e=this,t=this.props,n=t.main,r=(t.actions,t.actions.action);return a.l.createElement(i.a,{"className":"shipRecord"},a.l.createElement(c.a,{"scrollY":!0,"style":{"height":"calc(100vh - 56px - env(safe-area-inset-bottom))"}},a.l.createElement(i.a,null,n.tradeDilivery&&n.tradeDilivery.length>0?a.l.createElement(i.a,null,n.tradeDilivery.map(function(e,t){return a.l.createElement(i.a,{"key":t},a.l.createElement(P,{"order":e,"index":t}))}),a.l.createElement(i.a,{"className":"status"},"没有更多了")):null)),a.l.createElement(E.a,{"isOpened":n.showConfirmMask,"title":"确认收货","content":"确认已收到全部货品？","confirmText":"确定","cancelText":"取消","onConfirm":function onConfirm(){r.onConfirm(e.$router.params.tid),r.commonChange("main.showConfirmMask",!1)},"onCancel":function onCancel(){r.commonChange("main.showConfirmMask",!1)}}))}},{"key":"componentDidShow","value":function componentDidShow(){T(shipRecord.prototype.__proto__||Object.getPrototypeOf(shipRecord.prototype),"componentDidShow",this)&&T(shipRecord.prototype.__proto__||Object.getPrototypeOf(shipRecord.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){T(shipRecord.prototype.__proto__||Object.getPrototypeOf(shipRecord.prototype),"componentDidHide",this)&&T(shipRecord.prototype.__proto__||Object.getPrototypeOf(shipRecord.prototype),"componentDidHide",this).call(this)}}]),shipRecord}();N=Object(o.a)([Object(l.b)(store2Props,_)],N);t.default=N},"716":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(5),a=(n(280),n(2631)),o=n(279),i=n(3),c=(n(717),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var s=function(e){function WMMask(e){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WMMask),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(WMMask.__proto__||Object.getPrototypeOf(WMMask)).call(this,e))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(WMMask,i["a"].Component),c(WMMask,[{"key":"render","value":function render(){var e=this.props,t=e.isOpened,n=e.title,i=e.content,c=e.confirmText,s=e.cancelText,l=e.onConfirm,u=e.onCancel;return t?r.l.createElement(a.a,{"className":"common-mask"},r.l.createElement(a.a,{"className":"common-mask-container"},r.l.createElement(a.a,{"className":"common-mask-header"},r.l.createElement(o.a,{"className":"common-mask-header-title"},n)),r.l.createElement(a.a,{"className":"common-mask-body"},r.l.createElement(o.a,{"className":"common-mask-body-text"},i)),r.l.createElement(a.a,{"className":"common-mask-btn"},r.l.createElement(a.a,{"className":"common-mask-btn-cancel","onClick":u},s),r.l.createElement(a.a,{"className":"common-mask-btn-true","onClick":l},c)))):null}}]),WMMask}()},"717":function(e,t,n){}}]);