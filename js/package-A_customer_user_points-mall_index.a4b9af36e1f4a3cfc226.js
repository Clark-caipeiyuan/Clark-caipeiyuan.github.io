(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{"1480":function(e,t,n){},"1482":function(e,t){e.exports="data:image/png;base64,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"},"1483":function(e,t,n){e.exports=n.p+"static/images/new_bg.png"},"1484":function(e,t,n){e.exports=n.p+"static/images/btn_open.png"},"1485":function(e,t,n){e.exports=n.p+"static/images/btn_buy.png"},"1486":function(e,t,n){e.exports=n.p+"static/images/btn_recharge.png"},"2650":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return R});var r=n(5),a=n(3),i=n(11),c=n(14),o=n(2631),s=n(271),u=n(278),l=n(7),p=n(8),g=n(4),d=n(9),f=(n(1480),n(1482)),m=n.n(f),h=n(1483),v=n.n(h),k=n(1484),y=n.n(k),A=n(1485),b=n.n(A),w=n(1486),_=n.n(w),E=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),N=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(n):void 0};function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var i=t[r](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){step("next",e)},function(e){step("throw",e)});e(c)}("next")})}}var C=Object(p.b)("isIOS"),I=void 0,R=function(e){function sbcMarkeTctivity(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,sbcMarkeTctivity);var t=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(sbcMarkeTctivity.__proto__||Object.getPrototypeOf(sbcMarkeTctivity)).call(this,e));return t.config={"navigationBarTitleText":"惠享生活购好物"},t._goRulesPage=function(){},t._navBack=function(){I?window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("closeCurrent"):a.a.navigateBack({"delta":1})},t._goSubmit=function(){I?(window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("hideHeader"),t.setState({"isEnd":!0})):t.setState({"isEnd":!0})},t._goEgg=function(){I?window.ReactNativeWebView&&window.ReactNativeWebView.postMessage('{"goodsInfoId":"'+t.state.skuId+'"}'):a.a.navigateTo({"url":"/pages/package-B/goods/goods-details/index?skuId="+t.state.skuId})},t.state={"AccountStatus":-1,"callBackNotifyUrl":null,"clientNo":null,"frontNotifyUrl":null,"mechCode":null,"postUrl":null,"seqNo":null,"msg":null,"sign":null,"sourceDesc":null,"isEnd":!1,"showRules":!1,"skuId":null},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(sbcMarkeTctivity,a["a"].Component),E(sbcMarkeTctivity,[{"key":"componentWillMount","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e,t,n,r;return regeneratorRuntime.wrap(function _callee3$(c){for(;;)switch(c.prev=c.next){case 0:return e="/pages/package-A/customer/user/points-mall/index",t=this.$router.params.customerId,I=t,c.next=5,Object(i.d)("systemConfig: currentCityCode");case 5:n=c.sent,console.log("sourceDesc",n),this.setState({"sourceDesc":n}),console.log("this.state.sourceDesc",this.state.sourceDesc),r=this,C?window.addEventListener("message",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(t){var n;return regeneratorRuntime.wrap(function _callee2$(c){for(;;)switch(c.prev=c.next){case 0:if(n=JSON.parse(t.data),I||(I=n.customerId,r._init()),r.$router.path!=e||!n||!n.clickBtn||"backBtn"!=n.clickBtn){c.next=13;break}return c.next=5,Object(i.d)("isSecondPage");case 5:if(!c.sent){c.next=10;break}return c.next=9,Object(i.e)("isSecondPage");case 9:return c.abrupt("return",!1);case 10:window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("closeCurrent"),c.next=17;break;case 13:if(r.$router.path==e||!n||!n.clickBtn||"backBtn"!=n.clickBtn){c.next=17;break}return c.next=16,Object(i.g)("isSecondPage",1);case 16:a.a.redirectTo({"url":"/pages/package-A/customer/user/points-mall/index"});case 17:case"end":return c.stop()}},_callee2,this)}));return function(e){return t.apply(this,arguments)}}(),!1):document.addEventListener("message",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function _callee(t){var n;return regeneratorRuntime.wrap(function _callee$(c){for(;;)switch(c.prev=c.next){case 0:if(n=JSON.parse(t.data),I||(I=n.customerId,r._init()),r.$router.path!=e||!n||!n.clickBtn||"backBtn"!=n.clickBtn){c.next=13;break}return c.next=5,Object(i.d)("isSecondPage");case 5:if(!c.sent){c.next=10;break}return c.next=9,Object(i.e)("isSecondPage");case 9:return c.abrupt("return",!1);case 10:window.ReactNativeWebView&&window.ReactNativeWebView.postMessage("closeCurrent"),c.next=17;break;case 13:if(r.$router.path==e||!n||!n.clickBtn||"backBtn"!=n.clickBtn){c.next=17;break}return c.next=16,Object(i.g)("isSecondPage",1);case 16:a.a.redirectTo({"url":"/pages/package-A/customer/user/points-mall/index"});case 17:case"end":return c.stop()}},_callee,this)}));return function(e){return t.apply(this,arguments)}}(),!1);case 11:case"end":return c.stop()}},_callee3,this)}));return function componentWillMount(){return e.apply(this,arguments)}}()},{"key":"componentDidMount","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var e,t;return regeneratorRuntime.wrap(function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(i.d)("systemConfig: currentCityCode");case 2:if(e=n.sent,console.log("sourceDesc",e),this.setState({"sourceDesc":e}),t=this.$router.params.customerId,l.f.isLogin()||t){n.next=9;break}return a.a.redirectTo({"url":"/pages/package-A/login/login/index?isActivety=1"}),n.abrupt("return");case 9:return n.next=11,this._init();case 11:case"end":return n.stop()}},_callee4,this)}));return function componentDidMount(){return e.apply(this,arguments)}}()},{"key":"componentDidUpdate","value":function componentDidUpdate(){this.state.isEnd&&(Object(c.a)(),this.refs.form.submit())}},{"key":"render","value":function render(){console.log("this.state.sourceDesc render",this.state.sourceDesc);Object(i.d)(g.c.LOGIN_DATA).customerId;var e=this.state,t=e.AccountStatus,n=(e.msg,e.callBackNotifyUrl),a=e.clientNo,c=e.frontNotifyUrl,l=e.mechCode,d=e.postUrl,f=e.seqNo,h=e.sign,k=e.sourceDesc;e.skuId;return console.log(t,"isGoisGoisGo"),console.log(d),r.l.createElement(o.a,{"className":"sbc_market_activity_page"},r.l.createElement(s.a,{"scrollY":!0,"className":"scroll-content"},r.l.createElement(u.a,{"onClick":this._navBack,"src":m.a,"className":"nav_back"}),r.l.createElement(u.a,{"src":v.a,"className":"bg_back"}),r.l.createElement(o.a,{"className":"btn_go_Wrap"},(4==t||3==t)&&r.l.createElement("form",{"ref":"form","className":"form","action":d,"method":"post"},r.l.createElement("input",{"className":"inputHidden","style":{"visibility":"hidden"},"type":"text","name":"closeUrl","value":I?p.a.path+"/pages/package-A/customer/user/points-mall/index?customerId="+I:p.a.path+"/pages/package-A/customer/user/points-mall/index"}),r.l.createElement("input",{"className":"inputHidden","style":{"visibility":"hidden"},"type":"text","name":"mechCode","value":l}),r.l.createElement("input",{"className":"inputHidden","style":{"visibility":"hidden"},"type":"text","name":"seqNo","value":f}),r.l.createElement("input",{"className":"inputHidden","style":{"visibility":"hidden"},"type":"text","name":"callBackNotifyUrl","value":n}),r.l.createElement("input",{"className":"inputHidden","style":{"visibility":"hidden"},"type":"text","name":"frontNotifyUrl","value":c}),r.l.createElement("input",{"className":"inputHidden","style":{"visibility":"hidden"},"type":"text","name":"clientNo","value":a}),r.l.createElement("input",{"className":"inputHidden","style":{"visibility":"hidden"},"type":"text","name":"sign","value":h}),r.l.createElement("input",{"className":"inputHidden","style":{"visibility":"hidden"},"type":"text","name":"sourceDesc","value":k}),null),3==t&&r.l.createElement(o.a,{"className":"goBtnWrap"},r.l.createElement("button",{"className":"goBtn_egg","onClick":this._goSubmit,"id":"submit"}),r.l.createElement(u.a,{"src":_.a,"onClick":this._goEgg,"className":"btn_go_egg"})),4==t&&r.l.createElement(o.a,{"className":"goBtnWrap"},r.l.createElement("button",{"className":"goBtn_egg","onClick":this._goSubmit,"id":"submit"}),r.l.createElement(u.a,{"src":y.a,"onClick":this._goEgg,"className":"btn_go_egg"})),3!=t&&4!=t&&r.l.createElement(o.a,{"className":"goBtnWrap"},r.l.createElement("button",{"className":"goBtn_egg","onClick":this._goEgg,"id":"submit"}),r.l.createElement(u.a,{"src":b.a,"onClick":this._goEgg,"className":"btn_go_egg"})))))}},{"key":"_init","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function _callee5$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getStatus();case 2:return e.next=4,this._getQuery();case 4:return e.next=6,this._getSkuId();case 6:case"end":return e.stop()}},_callee5,this)}));return function _init(){return e.apply(this,arguments)}}()},{"key":"_goPageLink","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){return regeneratorRuntime.wrap(function _callee6$(e){for(;;)switch(e.prev=e.next){case 0:I?window.ReactNativeWebView&&window.ReactNativeWebView.postMessage('{"pageType":"poster","pageCode":"1614364743063"}'):a.a.navigateTo({"url":"/pages/package-B/x-site/page-link/index?pageType=poster&pageCode=1614364743063"});case 1:case"end":return e.stop()}},_callee6,this)}));return function _goPageLink(){return e.apply(this,arguments)}}()},{"key":"_getQuery","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){var e,t,n=this;return regeneratorRuntime.wrap(function _callee7$(r){for(;;)switch(r.prev=r.next){case 0:console.log("query",this.state.sourceDesc),e=Object(i.d)(g.c.LOGIN_DATA),t=e.customerId,I&&(t=I),t&&d.a.customerBaseController.openAccount({"sourceDesc":this.state.sourceDesc,"clientNo":t,"closeUrl":I?p.a.path+"/pages/package-A/customer/user/points-mall/index?customerId="+I:p.a.path+"/pages/package-A/customer/user/points-mall/index"}).then(function(e){console.log(JSON.stringify(e));var t=e.callBackNotifyUrl,r=e.clientNo,a=e.frontNotifyUrl,i=e.mechCode,c=e.postUrl,o=e.seqNo,s=e.sign,u=e.sourceDesc;n.setState({"callBackNotifyUrl":t,"clientNo":r,"frontNotifyUrl":a,"mechCode":i,"postUrl":c,"seqNo":o,"sign":s,"sourceDesc":u})}).catch(function(e){});case 5:case"end":return r.stop()}},_callee7,this)}));return function _getQuery(){return e.apply(this,arguments)}}()},{"key":"_getSkuId","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){var e=this;return regeneratorRuntime.wrap(function _callee8$(t){for(;;)switch(t.prev=t.next){case 0:d.a.customerBaseController.getSkuId().then(function(t){e.setState({"skuId":t})}).catch(function(e){});case 1:case"end":return t.stop()}},_callee8,this)}));return function _getSkuId(){return e.apply(this,arguments)}}()},{"key":"_getStatus","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){var e,t,n=this;return regeneratorRuntime.wrap(function _callee9$(r){for(;;)switch(r.prev=r.next){case 0:e=Object(i.d)(g.c.LOGIN_DATA),t=e.customerId,I&&(t=I),t?d.a.customerBaseController.queryActivity(t).then(function(e){var t=e.data.status;n.setState({"AccountStatus":t})}).catch(function(e){}):this.setState({"AccountStatus":-1});case 4:case"end":return r.stop()}},_callee9,this)}));return function _getStatus(){return e.apply(this,arguments)}}()},{"key":"componentDidShow","value":function componentDidShow(){N(sbcMarkeTctivity.prototype.__proto__||Object.getPrototypeOf(sbcMarkeTctivity.prototype),"componentDidShow",this)&&N(sbcMarkeTctivity.prototype.__proto__||Object.getPrototypeOf(sbcMarkeTctivity.prototype),"componentDidShow",this).call(this)}},{"key":"componentDidHide","value":function componentDidHide(){N(sbcMarkeTctivity.prototype.__proto__||Object.getPrototypeOf(sbcMarkeTctivity.prototype),"componentDidHide",this)&&N(sbcMarkeTctivity.prototype.__proto__||Object.getPrototypeOf(sbcMarkeTctivity.prototype),"componentDidHide",this).call(this)}}]),sbcMarkeTctivity}()}}]);